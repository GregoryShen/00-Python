# [给你一个扫码支付的二维码，如何写测试用例？](https://mp.weixin.qq.com/s/TFAG-E6QasOGx-13HtO0hw)

## 前言

面试的时候, 经常会临场出题: 给你一个xxx, 如何测试或者说如何写测试用例? xxx 可以是圆珠笔, 水杯, 电梯等生活中常见的场景. 那么给你一个支付等二维码, 如何写测试用例呢?

## 二维码支付

如下图, 给你这个个人收款的二维码, 如何测试?

![](https://mmbiz.qpic.cn/mmbiz_png/qia7WF9xhFyBiaMYSVX3F5U53lojUdIOOXGFmEjFAhoBVkCuRRWWxHUnwGaXRUJZoutBn8SqsFgLnBEUQcqwVCWA/640)

首先要知道什么是二维码? **<u>==二维码实际上就是一个 URL 地址==, 当手机扫码后, 会根据二维码上的黑和白(黑色的色素块代表1, 白色的色素块代表0)区域解析成 URL 地址.</u>**

然后再分析下使用场景, 这里实际上涉及到一个收款方, 一个付款方. 收款方生成二维码, 支付方拿着手机去扫码.

知道使用场景后, 接着拆分功能点, 从字面上“二维码扫码支付”,这7个字可以拆分成3个关键字: 二维码, 扫码, 支付

### 二维码场景用例

针对二维码写用例,可以分:

1. 生成的二维码是不是能正确识别, 支付方拿着手机能扫的出来
2. 二维码的准确性, 扫码后的功能对不对(本来是收款码, 要是生成付款码, 那就不对了)
3. 二维码的尺寸, 清晰度
4. 二维码是否会变(一般收款码不会变, 付款吗会定时刷新)

### 扫码场景

扫码是支付方的使用场景了

1. 网络环境, 无网络的时候, 二维码还能不能扫
2. 扫码的时候, 是自己能输入金额, 还是固定的支付金额(个人收款是用户随便输入金额, 生成的订单扫码是固定金额)
3. 如果是商户生成的固定订单,用户是否可以篡改金额
4. 如果是商户生成的固定订单,用户支付后,能不能重复支付
5. 多用户同时扫码支付场景,固定订单,只能被支付一次

### 支付场景

关于支付场景就复杂了,虽然上面的是二维码扫码支付,其核心功能在于支付,上面的各种扫码姿势都是停留在表面的点点点.

#### 支付金额场景

1. 支付的金额是否可以为空, 为0, 负数
2. 支付的金额最多几位小数, 一般是2位小数, 精确到分
3. 单笔最大金额
4. 单日最大金额

#### 支付方式

1. 支付方式: 余额, 余额宝, 花呗, 信用卡, 银行卡
2. 支付顺序, 默认的支付顺序是怎样的(或者自己设置的支付顺序)
3. 当第一个支付余额不足的时候, 是否能默认用第二顺序的支付, 依次类推
4. 不同的支付方式, 会有单笔限制, 比如不同银行卡会有不同额度

#### 支付密码

当用户选择了支付方式, 支付金额后, 下一步就是输入交易密码

1. 密码支付, 还是指纹支付, 还是刷脸支付
2. 密码正确, 交易成功
3. 密码错误, 交易失败
4. 交易失败后, 是否能重新支付
5. 用户取消支付
6. 用户不支付, 放着让它过期超时

#### 支付状态

支付之后, 那么就会有支付状态

1. 支付失败, 订单状态
2. 支付成功, 订单状态
3. 用户取消支付, 订单状态
4. 支付超时, 订单状态

#### 对账

1. 支付方支付成功后, 钱是不是变少了
2. 收款方收款后, 是立即到账, 还是延迟到账
3. 收款方如果没网, 对方支付成功后, 下次联网是否能看到收款记录
4. 当然支付宝还有语音播报: 支付宝到账xx元

#### 退款

支付方付款后, 突然反悔了, 那么此时就涉及到退款功能了

1. 退款是原路返回, 还是怎样的?
2. 立即到账, 还是人工处理
3. 退款的时候有没有扣手续费
4. 退款后, 订单状态变更

#### 手续费

说到手续费, 如果对方是花呗, 信用卡, 那么就涉及手续费的问题

1. 对方花呗, 信用卡付款, 手续费扣比例对不对
2. 退款的时候, 手续费会不会算你的

#### 红包和券

1. 如果支付方有平台红包可以用, 是否能抵扣平台红包, 收款方不受红包影响
2. 还有券的使用, 满减券, 是否能叠加, 还是固定商品使用券
3. 涉及退款的时候, 这些红包和券是作废, 还是原路返回

## 安全与性能

安全和性能是最容易被忽略的，平常都是点点点，拿着一个测试需求就想着怎么去点了，如果能回答安全和性能方面是可以加分的。

### 支付安全性

如果是一个固定金额的订单，比如100元订单，用户在扫码支付的时候，会从二维码中解析出支付金额，此时如果我抓包后，篡改了金额，比如改成0.01元，是否能支付成功

一般这种订单接口都会有 sign 签名，防止用户篡改请求参数

![](https://mmbiz.qpic.cn/mmbiz_png/qia7WF9xhFyBiaMYSVX3F5U53lojUdIOOXP5GiaIQnknva7DRKgcVsqDhumZlgkNzTTibtM3bjDxvk0DQhwsPlmNUA/640)

### 性能

说到性能，必然会扯到高并发，多用户同时调用支付接口并发，会不会有什么问题呢

这里的并发，并不是多个人扫一个二维码，是整个系统比如支付宝用户有xx亿，在一分钟内有1000万用户在使用扫码支付，测试整个系统的性能。

类似于：给你一个xxx，如何测试？这种问题不能停留在表面上，要有全局观，把它当成一个小的项目去测试。回答问题的思路从 UI - 功能 - 接口 - 业务 - 场景 - 安全 - 性能等方面回答。

# [我去热饭：遇到的面试题 和解法重点：第一期](https://mp.weixin.qq.com/s/GNkxwJvKqGRECVoJ4rKcPA)

## 请说说纸杯/电梯/qq登录的测试用例

这种题注意，尽量多说用例，这是让面试官看到你的思维活跃度高的依据。但最好是能有条理的说出来，而不是想起哪个测试点就说哪个。遇到任何问题都要把大纲先说给或者画给面试官看，然后再从头开始添枝加叶，最后再说一句，因为时间关系，就不继续说了。

遇到没头绪的时候不用思考，思考就会冷场，一定要一边开始一边思考，效果好，所以听完面试官的问题，直接开口说：我先把测试点大纲给你写出来，然后一边写一边就开始构思下一步。

大致大纲：

功能、非功能、接口

功能可以分输入、处理、输出

非功能可以分为iso9126的六大特性27子特性来一个一个套

接口分为用户接口、软件接口、硬件接口

各种智力测试题目，如用两个水桶量出xx升水，天秤怎么称出最轻的一个球之类。

这种问题一定要先思考一下，不能忙着回答，除非你知道标准答案。

但是不要自己闷头想了很久，画了半天，然后最终告诉面试官答案是什么。面试官更想听的是你的思路，是如何求出这个答案的，如果你的思路没问题，其实答案正确与否已经不是那么重要了。比如你可以这么回答：当我听到这个问题的时候，我先整理了下目前我已经确认的资料。有xxx，xx，xx。若想求得这个解，我觉得首先要知道xxx，xxx。要知道这些，可以有xx，xx办法。然后xx，xx

假如我是你老家的朋友，现在要来北京玩，你打算怎么安排我。

作为一个测试，遇到这个需求，上来就开始写用例（写安排流程）其实是错误的做法。正确的做法是先反问回去你的朋友，你打算什么时候来？早上到还是晚上到？坐什么交通工具来？哪站到？你以前来过么？你吃东西有忌口吗？这次来有特别想去的地方么？什么时候走？想住旅馆还是宾馆等。

这就是在过需求评审的时候，应该对产品经理反问种种细节。而不是直接开干。所以以后面试的时候遇到这类开放性问题，首先要去反思面试官为什么要问这个问题，然后再回答出对方想要的。很显然面试官想看看我作为测试的性格和规范，其次才是我的思路完美与否。

问小明一家过一座桥，桥破旧，每次最多能容两人同时通过，过桥时是黑夜，且只有一只手电（过桥必须用手电）。现在小明过桥要1秒，小明的弟弟要3秒，小明的爸爸要6秒，小明的妈妈要8秒，小明的爷爷要12秒。每次此桥最多可过两人，而过桥的速度依过桥最慢者而定，问：小明一家如何过桥最快？

这种智力测试题非常经典，常出现在高p领导的最后面试中，因为你的专业技术，业务，项目，背景基本都在之前面试中通过了，最后关卡基本就是看看你的智力，人品等。考你的题页多数都是百度搜的到的，建议面试大公司，一定要先熟悉好所有这种经典智力题哦～



































[如何估算一个城市的出租车数量？](http://www.woshipm.com/zhichang/3494300.html)

[头条必考估算题丨你知道北京有多少个加油站吗?](https://zhuanlan.zhihu.com/p/60716010)

看到一个点赞 怎么写测试用例